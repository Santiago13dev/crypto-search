{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kevin/Desktop/SantiagoDev/proyectospersonales/crypto-search/crypto-backend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createClient } from '@supabase/supabase-js';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nconst SUPABASE_URL = 'YOUR_SUPABASE_URL';\nconst SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY';\nexport class SupabaseService {\n  constructor() {\n    this.currentUserSubject = new BehaviorSubject(null);\n    this.currentUser$ = this.currentUserSubject.asObservable();\n    this.supabase = createClient(SUPABASE_URL, SUPABASE_KEY);\n    this.loadUser();\n    this.supabase.auth.onAuthStateChange((event, session) => {\n      this.currentUserSubject.next(session?.user ?? null);\n    });\n  }\n  loadUser() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const {\n        data: {\n          user\n        }\n      } = yield _this.supabase.auth.getUser();\n      _this.currentUserSubject.next(user);\n    })();\n  }\n  get client() {\n    return this.supabase;\n  }\n  get auth() {\n    return this.supabase.auth;\n  }\n  from(table) {\n    return this.supabase.from(table);\n  }\n  get storage() {\n    return this.supabase.storage;\n  }\n  get currentUser() {\n    return this.currentUserSubject.value;\n  }\n  rpc(fn, params) {\n    return this.supabase.rpc(fn, params);\n  }\n  static {\n    this.ɵfac = function SupabaseService_Factory(t) {\n      return new (t || SupabaseService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SupabaseService,\n      factory: SupabaseService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["createClient","BehaviorSubject","SUPABASE_URL","SUPABASE_KEY","SupabaseService","constructor","currentUserSubject","currentUser$","asObservable","supabase","loadUser","auth","onAuthStateChange","event","session","next","user","_this","_asyncToGenerator","data","getUser","client","from","table","storage","currentUser","value","rpc","fn","params","factory","ɵfac","providedIn"],"sources":["C:\\Users\\kevin\\Desktop\\SantiagoDev\\proyectospersonales\\crypto-search\\crypto-backend\\src\\app\\core\\services\\supabase.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { createClient, SupabaseClient, User } from '@supabase/supabase-js';\nimport { BehaviorSubject } from 'rxjs';\n\nconst SUPABASE_URL = 'YOUR_SUPABASE_URL';\nconst SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SupabaseService {\n  private supabase: SupabaseClient;\n  private currentUserSubject = new BehaviorSubject<User | null>(null);\n  public currentUser$ = this.currentUserSubject.asObservable();\n\n  constructor() {\n    this.supabase = createClient(SUPABASE_URL, SUPABASE_KEY);\n    this.loadUser();\n    \n    this.supabase.auth.onAuthStateChange((event, session) => {\n      this.currentUserSubject.next(session?.user ?? null);\n    });\n  }\n\n  private async loadUser() {\n    const { data: { user } } = await this.supabase.auth.getUser();\n    this.currentUserSubject.next(user);\n  }\n\n  get client() {\n    return this.supabase;\n  }\n\n  get auth() {\n    return this.supabase.auth;\n  }\n\n  from(table: string) {\n    return this.supabase.from(table);\n  }\n\n  get storage() {\n    return this.supabase.storage;\n  }\n\n  get currentUser() {\n    return this.currentUserSubject.value;\n  }\n\n  rpc(fn: string, params?: any) {\n    return this.supabase.rpc(fn, params);\n  }\n}\n"],"mappings":";AACA,SAASA,YAAY,QAA8B,uBAAuB;AAC1E,SAASC,eAAe,QAAQ,MAAM;;AAEtC,MAAMC,YAAY,GAAG,mBAAmB;AACxC,MAAMC,YAAY,GAAG,wBAAwB;AAK7C,OAAM,MAAOC,eAAe;EAK1BC,YAAA;IAHQ,KAAAC,kBAAkB,GAAG,IAAIL,eAAe,CAAc,IAAI,CAAC;IAC5D,KAAAM,YAAY,GAAG,IAAI,CAACD,kBAAkB,CAACE,YAAY,EAAE;IAG1D,IAAI,CAACC,QAAQ,GAAGT,YAAY,CAACE,YAAY,EAAEC,YAAY,CAAC;IACxD,IAAI,CAACO,QAAQ,EAAE;IAEf,IAAI,CAACD,QAAQ,CAACE,IAAI,CAACC,iBAAiB,CAAC,CAACC,KAAK,EAAEC,OAAO,KAAI;MACtD,IAAI,CAACR,kBAAkB,CAACS,IAAI,CAACD,OAAO,EAAEE,IAAI,IAAI,IAAI,CAAC;IACrD,CAAC,CAAC;EACJ;EAEcN,QAAQA,CAAA;IAAA,IAAAO,KAAA;IAAA,OAAAC,iBAAA;MACpB,MAAM;QAAEC,IAAI,EAAE;UAAEH;QAAI;MAAE,CAAE,SAASC,KAAI,CAACR,QAAQ,CAACE,IAAI,CAACS,OAAO,EAAE;MAC7DH,KAAI,CAACX,kBAAkB,CAACS,IAAI,CAACC,IAAI,CAAC;IAAC;EACrC;EAEA,IAAIK,MAAMA,CAAA;IACR,OAAO,IAAI,CAACZ,QAAQ;EACtB;EAEA,IAAIE,IAAIA,CAAA;IACN,OAAO,IAAI,CAACF,QAAQ,CAACE,IAAI;EAC3B;EAEAW,IAAIA,CAACC,KAAa;IAChB,OAAO,IAAI,CAACd,QAAQ,CAACa,IAAI,CAACC,KAAK,CAAC;EAClC;EAEA,IAAIC,OAAOA,CAAA;IACT,OAAO,IAAI,CAACf,QAAQ,CAACe,OAAO;EAC9B;EAEA,IAAIC,WAAWA,CAAA;IACb,OAAO,IAAI,CAACnB,kBAAkB,CAACoB,KAAK;EACtC;EAEAC,GAAGA,CAACC,EAAU,EAAEC,MAAY;IAC1B,OAAO,IAAI,CAACpB,QAAQ,CAACkB,GAAG,CAACC,EAAE,EAAEC,MAAM,CAAC;EACtC;;;uBAzCWzB,eAAe;IAAA;EAAA;;;aAAfA,eAAe;MAAA0B,OAAA,EAAf1B,eAAe,CAAA2B,IAAA;MAAAC,UAAA,EAFd;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}